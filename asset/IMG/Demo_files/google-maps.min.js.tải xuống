!function(s){function o(t,e){if(this.$T=s(t),this.options=s.extend(!0,{latitude:null,longitude:null,zoom:15,marker:{image:null,width:null,height:null},styles:null,snazzymaps:null},e,{latitude:this.$T.data("latitude"),longitude:this.$T.data("longitude"),zoom:this.$T.data("zoom"),marker:{image:this.$T.data("marker-image"),width:this.$T.data("marker-width"),height:this.$T.data("marker-height")},saturation:this.$T.data("saturation"),lightness:this.$T.data("lightness"),hue:this.$T.data("hue")}),0<this.$T.parent().find("#wplook-google-map-template").length){var o=JSON.parse(this.$T.parent().find("#wplook-google-map-template").html());"object"==typeof o&&(this.options.snazzymaps=o)}return this.map=null,this._init(t,e),this}var i="wplGoogleMaps";o.prototype._init=function(t,e){this._generateMap(t)},o.prototype._generateMap=function(t){var a=this;t.each(function(t,e){if(!a.options.latitude&&!a.options.longitude)return console.error("No coordinates provided for map. Map could not be generated."),!1;if(a.options.saturation||a.options.lightness||a.options.hue)var o=[{featureType:"all",stylers:[{saturation:parseFloat(a.options.saturation)},{lightness:parseFloat(a.options.lightness)},{hue:a.options.hue}]}];else if(a.options.styles)o=a.options.styles;else if(a.options.snazzymaps)o=a.options.snazzymaps;else o=!1;if(a.map=new google.maps.Map(s(e)[0],{center:{lat:parseFloat(a.options.latitude),lng:parseFloat(a.options.longitude)},zoom:parseFloat(a.options.zoom),disableDefaultUI:!0,scrollwheel:!1,styles:o}),a.options.marker.image){if(!a.options.marker.width||!a.options.marker.height||a.options.marker.width==a.options.marker.height||32==a.options.marker.width&&32==a.options.marker.height)a.options.marker.width=32,a.options.marker.height=32;else{var i=Math.min(32/a.options.marker.width,32/a.options.marker.height);a.options.marker.width=Math.round(a.options.marker.width*i),a.options.marker.height=Math.round(a.options.marker.height*i)}new google.maps.Marker({position:{lat:parseFloat(a.options.latitude),lng:parseFloat(a.options.longitude)},icon:{url:a.options.marker.image,scaledSize:new google.maps.Size(a.options.marker.width,a.options.marker.height)},map:a.map})}else new google.maps.Marker({position:{lat:parseFloat(a.options.latitude),lng:parseFloat(a.options.longitude)},map:a.map});return this.$T})},o.prototype.resize=function(){google.maps.event.trigger(this.map,"resize")},s.fn[i]=function(t){if(!s(this).length)return s(this);var e=s(this).data(i);return e&&"string"==typeof t&&0!=t.indexOf("_")&&e[t]&&"function"==typeof e[t]?e[t](Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void(e?0==t.indexOf("_")?s.error("Method "+t+" is private!"):s.error("Method "+t+" does not exist."):s.error("Plugin must be initialised before using method: "+t)):(e=new o(s(this),t),s(this).data(i,e),s(this))}}(jQuery);